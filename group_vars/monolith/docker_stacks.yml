---
docker_stacks:
  - name: "cloudflared"
    enabled: true
    project_path: "/home/{{ ansible_user }}/ansible_docker/cloudflared"
    compose_content: |
      version: '3.3'
      services:
        cloudflared:
          image: cloudflare/cloudflared:latest
          container_name: cloudflared
          restart: unless-stopped
          command: tunnel run
          environment:
            - TUNNEL_TOKEN=${CLOUDFLARED_TUNNEL_TOKEN}
          network_mode: host
    env_content: |
      # This file is managed by Ansible. Do not edit manually.

      CLOUDFLARED_TUNNEL_TOKEN={{ CLOUDFLARED_TUNNEL_TOKEN }}
